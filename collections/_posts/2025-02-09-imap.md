---
layout: post
title: What is IMAP and how does it work
date: 2025-02-16
summary: IMAP - Internet Message Access Protocol - is protocol that is used for accessing e-mail from server. IMAP allow user to access email from different locations at the same time, which means that you can access you email with computer, and mobile at the same time.
categories: protocol imap networking
---


What is protocol?

What is IMAP?
IMAP was designed by Mark Crispin in 1986 as a remote access mailbox protocol, in contrast to the widely used POP,
a protocol for simply retrieving the contents of a mailbox. [1]

IMAP is protocol that is used for accessing e-mail on server. IMAP allow user to access email from different locations at the same time, which means that you can access you email with computer, and mobile at the same time. This couldn't be done with POP (Post Office Protocol) which would download email at the one place from where we access it and delete from server.

## IMAP versions

There is five versions of IMAP so far. 
* First version IMAP Original was released in 1986. 
* IMAP2
* IMAP3
* IMAP2bis
* IMAP4

In this post, we will explore IMAP version 4 rev1. Request for comment (RFC) can be found [here](https://datatracker.ietf.org/doc/html/rfc3501){:target="_blank"}


### Client-server architecture

<figure style="margin: 0; margin-bottom: 1em;">
<img src="/images/imap_client_server.png" alt="IMAP client-server architecture" style="border-radius: 0.4em;">
<figcaption style="color: #777;">IMAP client-server architecture.</figcaption>
</figure>

But, more real scenario would looks something like this, with more clients contacting one server. 


<figure style="margin: 0; margin-bottom: 1em;">
<img src="/images/imap_clients_server.png" alt="IMAP clients-server architecture" style="border-radius: 0.4em;">
<figcaption style="color: #777;">IMAP client-server architecture.</figcaption>
</figure>

Server completion response can be:
* OK - success
* NO - failure
* BAD - protocol error

Connection between client and server can be in four states:
* NOT AUTHENTICATED STATE
* AUTHENTICATE
* SELECTED
* LOGOUT

Based on this state there is different set of commands that can be used. For example client command CAPABILITY can be used in ANY connection state.

```latex
CAPABILITY command
Arguments:	none
Response:	REQUIRED untagged response: CAPABILITY 
Result:		OK - success
		BAD - command unknown or arguments invalid

```

---
1 - [Wikipedia](https://en.wikipedia.org/wiki/Internet_Message_Access_Protocol)